<div class="job-detail-page">
  <div class="page-header">
    <a routerLink="/jobs" class="btn btn-outline">Back to List</a>
    <div class="header-actions">
      @if (jobId()) {
      <a [routerLink]="['/jobs', jobId(), 'edit']" class="btn btn-primary">
        Edit
      </a>
      }
    </div>
  </div>

  @if (loading()) {
  <div class="text-center">Loading...</div>
  } @else if (error()) {
  <div class="error-message">{{ error() }}</div>
  } @else if (job()) {
  <div class="card">
    <div class="job-header">
      <div>
        <h2 class="job-title">{{ job()!.positionTitle }}</h2>
        <p class="job-company">{{ job()!.companyName }}</p>
        @if (job()!.location) {
        <p class="job-location">{{ job()!.location }}</p>
        }
      </div>
      <span class="badge badge-{{ job()!.status }}">
        {{ formatStatus(job()!.status) }}
      </span>
    </div>

    <div class="job-details">
      <div class="detail-section">
        <h3>Application Details</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">Application Date</span>
            <span class="detail-value">
              {{ formatDate(job()!.applicationDate) }}
            </span>
          </div>
          @if (job()!.lastUpdateDate) {
          <div class="detail-item">
            <span class="detail-label">Last Updated</span>
            <span class="detail-value">
              {{ formatDate(job()!.lastUpdateDate!) }}
            </span>
          </div>
          } @if (job()!.source) {
          <div class="detail-item">
            <span class="detail-label">Source</span>
            <span class="detail-value">
              {{ formatSource(job()!.source!) }}
            </span>
          </div>
          } @if (job()!.jobUrl) {
          <div class="detail-item">
            <span class="detail-label">Job URL</span>
            <span class="detail-value">
              <a
                [href]="job()!.jobUrl"
                target="_blank"
                rel="noopener noreferrer"
              >
                View Job Posting
              </a>
            </span>
          </div>
          }
        </div>
      </div>

      @if (job()!.salaryExpectation || job()!.salaryOffered) {
      <div class="detail-section">
        <h3>Salary Information</h3>
        <div class="detail-grid">
          @if (job()!.salaryExpectation) {
          <div class="detail-item">
            <span class="detail-label">Salary Expectation</span>
            <span class="detail-value">
              ${{ formatSalary(job()!.salaryExpectation!) }}
            </span>
          </div>
          } @if (job()!.salaryOffered) {
          <div class="detail-item">
            <span class="detail-label">Salary Offered</span>
            <span class="detail-value">
              ${{ formatSalary(job()!.salaryOffered!) }}
            </span>
          </div>
          }
        </div>
      </div>
      } @if (job()!.notes) {
      <div class="detail-section">
        <h3>Notes</h3>
        <p class="notes-text">{{ job()!.notes }}</p>
      </div>
      }
    </div>

    <div class="detail-actions">
      @if (jobId()) {
      <a [routerLink]="['/jobs', jobId(), 'edit']" class="btn btn-primary">
        Edit Job
      </a>
      <button class="btn btn-danger" (click)="deleteJob()">Delete Job</button>
      }
    </div>
  </div>
  }
</div>
